(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports=a(68)},38:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(29),l=a.n(i),o=(a(38),a(15)),c=a(13),s=a(3),u=a(4),h=a(6),m=a(5),d=a(8),p=a(7),g=a(12),f=a.n(g),b=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Flight No."),r.a.createElement("th",null,"From:"),r.a.createElement("th",null,"To:"),r.a.createElement("th",null,"Flight Model:")),r.a.createElement("tbody",null,this.props.searchResults.map(function(e,t){var a=new Date(Number(e.date)),n="".concat(a.getDate()," / ").concat(a.getMonth()+1," / ").concat(a.getFullYear()-2e3);return r.a.createElement("tr",{key:t},r.a.createElement("td",null,n),r.a.createElement("td",null,r.a.createElement(o.b,{to:"/flight/".concat(e.flightNumber)},e.flightNumber)),r.a.createElement("td",null,e.from),r.a.createElement("td",null,e.to),r.a.createElement("td",null,e.airplane))})))}}]),t}(n.Component),v=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={destinations:["","Sydney","Brisbane","Melbourne","Salvador"],fromValue:"",toValue:"",currentDate:0,searchResults:[]},e._handleChangeFrom=e._handleChangeFrom.bind(Object(d.a)(e)),e._handleChangeTo=e._handleChangeTo.bind(Object(d.a)(e)),e._handleSubmit=e._handleSubmit.bind(Object(d.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"_handleChangeFrom",value:function(e){this.setState({fromValue:e.target.value})}},{key:"_handleChangeTo",value:function(e){this.setState({toValue:e.target.value})}},{key:"_handleSubmit",value:function(e){var t=this;e.preventDefault();var a=(new Date).getTime();this.setState({currentDate:a});f.a.get("https://burning-airlines-sei31.herokuapp.com/flights.json").then(function(e){var a=e.data.map(function(e){return{date:e.date,flightNumber:e.flight_number,from:e.origin,to:e.destination,airplane:e.airplane.model}});t.setState({searchResults:a})})}},{key:"renderDestinations",value:function(){return this.state.destinations.map(function(e){return r.a.createElement("option",{key:e,value:e},e)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Search for flights"),r.a.createElement("form",{onSubmit:this._handleSubmit},r.a.createElement("select",{onChange:this._handleChangeFrom},this.renderDestinations()),r.a.createElement("select",{onChange:this._handleChangeTo},this.renderDestinations()),r.a.createElement("button",null,"Cancel"),r.a.createElement("input",{type:"submit",value:"Search"})),r.a.createElement(b,{searchResults:this.state.searchResults}))}}]),t}(n.Component),k=a(16),E=a(32),C={backgroundColor:"red",border:"1px solid black",transition:"all .3s"},w={backgroundColor:"white",border:"1px solid black",transition:"all .3s"},j=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dataRow,a=e.dataColumn,n=e.activeSeat,i=e.onClick;return!0!==n?r.a.createElement("div",{onClick:i,"data-row":t,"data-column":a,style:w},t,a," Avail"):r.a.createElement("div",{onClick:i,"data-row":t,"data-column":a,style:C},r.a.createElement("p",null,this.props.user_id))}}]),t}(n.Component),y=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={isBooked:!1},e._handleClick=e._handleClick.bind(Object(d.a)(e)),e.toggleConfirm=e.toggleConfirm.bind(Object(d.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"toggleConfirm",value:function(){this.setState({isBooked:!this.state.isBooked})}},{key:"_handleClick",value:function(){var e=this,t=this.props,a=t.activeRow,n=t.activeColumn,r=t.flightNumber;f.a.post("https://burning-airlines-sei31.herokuapp.com/reservations.json",{user_id:1,flight_id:r,row:a,column:"".concat(n)}).then(function(t){return e.toggleConfirm()})}},{key:"renderConfirm",value:function(){var e=this.props,t=e.activeRow,a=e.activeColumn;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Confirm Seat: "),r.a.createElement("p",null,t,a),r.a.createElement("button",{onClick:this._handleClick},"Book Now!"))}},{key:"renderMsg",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Congratulations"),r.a.createElement("button",{onClick:this.toggleConfirm},"Book another seat"))}},{key:"render",value:function(){return this.state.isBooked?r.a.createElement(r.a.Fragment,null,this.renderMsg()):r.a.createElement(r.a.Fragment,null,this.renderConfirm())}}]),t}(n.Component),O=(a(66),function(e){function t(){var e;Object(s.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={activeRow:0,activeColumn:0,airplane:{row:0,column:0},reservations:[{id:0,user_id:3,column:0,row:0}],userNames:{0:""}},e._handleSeatClick=e._handleSeatClick.bind(Object(d.a)(e));f.a.get("https://burning-airlines-sei31.herokuapp.com/users.json").then(function(t){var a={};t.data.forEach(function(e){a=Object(E.a)({},a,Object(k.a)({},e.id,e.name))}),e.setState({userNames:a})});f.a.get("https://burning-airlines-sei31.herokuapp.com/airplanes.json").then(function(t){return e.setState({airplane:t.data[0]})});return function t(){f.a.get("https://burning-airlines-sei31.herokuapp.com/reservations.json").then(function(t){return e.setState({reservations:t.data})},setTimeout(t,2e3))}(),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"_handleSeatClick",value:function(e){var t=e.target.getAttribute("data-row"),a=e.target.getAttribute("data-column");this.setState({activeRow:t,activeColumn:a})}},{key:"renderSeats",value:function(){var e=this,t=this.state,a=t.activeRow,n=t.activeColumn,i=t.airplane,l=i.row,o=i.column;return Array.from(new Array(l*o)).map(function(t,i){var l=Math.ceil((i+1)/o),c=i+1-(l-1)*o,s=a==l&&n==c;return r.a.createElement(j,{key:i*Math.random(),className:"seat",id:i,dataColumn:c,dataRow:l,activeSeat:s,onClick:e._handleSeatClick})})}},{key:"renderReservations",value:function(){var e=this;return this.state.reservations.map(function(t){var a=t.id,n=t.column,i=t.row,l=t.user_id;return r.a.createElement("div",{key:a,className:"seat",style:{gridColumn:n,gridRow:i,border:"1px solid black",backgroundColor:"#eee",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},"data-column":n,"data-row":i,onClick:e._handleSeatClick},e.state.userNames[l])})}},{key:"render",value:function(){var e=this.state,t=e.activeRow,a=e.activeColumn;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"seating-chart-heading"},"Select A Seat"),r.a.createElement("div",{className:"seating-chart-row-names"}),r.a.createElement("div",{className:"plane"},r.a.createElement("div",{style:{position:"absolute",display:"grid",gridTemplateRows:"repeat(".concat(this.state.airplane.row,", 50px)"),gridTemplateColumns:"repeat(".concat(Number(this.state.airplane.column),", 50px)"),gridColumnGap:"5px",gridRowGap:"10px",width:"".concat(55*this.state.airplane.column,"px"),margin:"0 auto"}},this.renderSeats()),r.a.createElement("div",{style:{position:"absolute",display:"grid",gridTemplateRows:"repeat(".concat(this.state.airplane.row,", 50px)"),gridTemplateColumns:"repeat(".concat(Number(this.state.airplane.column),", 50px)"),gridColumnGap:"5px",gridRowGap:"10px",width:"".concat(55*this.state.airplane.column,"px"),margin:"0 auto",pointerEvents:"none"}},this.renderReservations())),r.a.createElement(y,{activeRow:t,activeColumn:a,flightNumber:this.props.flightNumber}))}}]),t}(n.Component)),S=(a(67),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={date:0},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"fetchFlight",value:function(){var e=this;f.a.get("https://burning-airlines-sei31.herokuapp.com/flights.json").then(function(t){var a=t.data.filter(function(t){return t.id==e.props.match.params.name})[0],n=a.flight_number,r=a.date,i=a.origin,l=a.destination;e.setState({flight_number:n,date:r,origin:i,destination:l})})}},{key:"componentDidMount",value:function(){this.fetchFlight()}},{key:"componentWillReceiveProps",value:function(){this.fetchFlight()}},{key:"render",value:function(){var e=new Date(Number(this.state.date)),t="".concat(e.getDate()," / ").concat(e.getMonth()+1," / ").concat(e.getFullYear()-2e3);return r.a.createElement("div",null,r.a.createElement("h1",null,"Flight Details"),r.a.createElement("h3",null,r.a.createElement("span",{className:"flight-details-heading"},t),r.a.createElement("span",{className:"flight-details-heading"},"Flight ",this.state.flight_number),r.a.createElement("span",{className:"flight-details-heading"},this.state.origin),r.a.createElement("span",{className:"flight-details-heading"},this.state.destination)),r.a.createElement(O,{flightNumber:this.props.match.params.name}))}}]),t}(n.Component)),_=r.a.createElement(o.a,null,r.a.createElement("div",null,r.a.createElement(c.a,{exact:!0,path:"/searchflights",component:v}),r.a.createElement(c.a,{exact:!0,path:"/flight/:name",render:function(e){return r.a.createElement(S,Object.assign({},e,{flightData:"test"}))}})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(_,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.ce1a564f.chunk.js.map